<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Documenting a Model &mdash; DFFML 5b53a7dbe documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sources" href="../sources/index.html" />
    <link rel="prev" title="Packaging a Model" href="package.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> DFFML
          </a>
              <div class="version">
                5b53a7dbe
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/index.html">Concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/model.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Models</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="iris.html">Use a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="load.html">Load Models Dynamically</a></li>
<li class="toctree-l3"><a class="reference internal" href="archive.html">Using Archives to Store Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="slr.html">Writing a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="package.html">Packaging a Model</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Documenting a Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#python-docstrings">Python docstrings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quick-rst-background">Quick rST background</a></li>
<li class="toctree-l4"><a class="reference internal" href="#consoletest">consoletest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-datasets">Example Datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-cli-commands">Example CLI Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-python-usage">Example Python Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-examples">Testing Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sources/index.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accuracy/index.html">Scorers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dataflows/index.html">DataFlows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../neuralnetwork.html">Neural Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doublecontextentry.html">Double Context Entry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/service/http/index.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/base.html">Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/log.html">Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/noasync.html">Noasync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/record.html">Record</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/version.html">Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/db/index.html">Db</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/cli/index.html">Cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/df/index.html">Df</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/high_level/index.html">High_Level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/tuner/index.html">Tuner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/service/index.html">Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/util/index.html">Util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/configloader/index.html">Configloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/accuracy/index.html">Accuracy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/source/index.html">Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/operation/index.html">Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/model/index.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/secret/index.html">Secret</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/port/index.html">Port</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/feature/index.html">Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Subprojects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../shouldi.html">shouldi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/dffml">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://intel.github.io/dffml/main/">Master Branch Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DFFML</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
          <li><a href="index.html">Models</a> &raquo;</li>
      <li>Documenting a Model</li>


      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/intel/dffml/blob/main/docs/tutorials/models/docs.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>


  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="documenting-a-model">
<span id="model-tutorial-docs"></span><h1>Documenting a Model<a class="headerlink" href="#documenting-a-model" title="Permalink to this heading"></a></h1>
<p>We can write the documentation and examples for our new model within the model
docstring. We should always include at least two examples so that others will
know how to use our model! We shoot for at least one command line example, and
one Python example. We can put the examples in restructured text format within
the class’s docstring.</p>
<p>This tutorial is meant to go after the <a class="reference internal" href="package.html#model-tutorial-package"><span class="std std-ref">Packaging a Model</span></a> tutorial.</p>
<p>It’s okay if you skipped to here though you can get up to speed by running the
following commands. These commands create the model package containing starter
code, change directory into the package, install the package, and run the
setuptools <code class="docutils literal notranslate"><span class="pre">egg_info</span></code> hook to register the model with the <code class="docutils literal notranslate"><span class="pre">entry_points</span></code>
system.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dffml service dev create model dffml-model-myslr
<span class="gp">$ </span><span class="nb">cd</span> dffml-model-myslr
<span class="gp">$ </span>python -m pip install -e .<span class="o">[</span>dev<span class="o">]</span>
<span class="gp">$ </span>python setup.py egg_info
</pre></div>
</div>
<section id="python-docstrings">
<h2>Python docstrings<a class="headerlink" href="#python-docstrings" title="Permalink to this heading"></a></h2>
<p>A docstring in Python is a comment immediately following a class or function
definition. Python will print out an object’s docstring if the object is passed
to the <a class="reference external" href="https://docs.python.org/3/library/functions.html#help" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> function.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -c <span class="s1">&#39;from dffml_model_myslr.myslr import MySLRModel; help(MySLRModel)&#39;</span>
<span class="go">Help on class MySLRModel in module dffml_model_myslr.myslr:</span>

<span class="go">class MySLRModel(dffml.model.model.SimpleModel)</span>
<span class="go"> |  MySLRModel(config: &#39;BaseConfig&#39;) -&gt; None</span>
<span class="go"> |</span>
<span class="go"> |  Example Logistic Regression training one variable to predict another.</span>
<span class="go"> |</span>
</pre></div>
</div>
<p>The docstring goes right after our <code class="docutils literal notranslate"><span class="pre">class</span></code> definition. We prefix the block
comment <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code> with the character <code class="docutils literal notranslate"><span class="pre">r</span></code> which means that the block comment
will be treated as a “raw literal”. For more information on raw literals see
<a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals">https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals</a>.
In our case it essentially means that when we have a backslash it will be
treated as a backslash and not an escape character.</p>
<p><strong>dffml_model_myslr/myslr.py</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">65</span><span class="nd">@entrypoint</span><span class="p">(</span><span class="s2">&quot;myslr&quot;</span><span class="p">)</span>
<span class="linenos">66</span><span class="k">class</span> <span class="nc">MySLRModel</span><span class="p">(</span><span class="n">SimpleModel</span><span class="p">):</span>
<span class="linenos">67</span>    <span class="sa">r</span><span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="quick-rst-background">
<h2>Quick rST background<a class="headerlink" href="#quick-rst-background" title="Permalink to this heading"></a></h2>
<p>When you see something with <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">``</span> <span class="pre">and</span> <span class="pre">``::</span></code> at the end that’s called a
“directive”. For example you’ll see <code class="docutils literal notranslate"><span class="pre">code-block</span></code> and <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code> which
are directives. Each string that follows <code class="docutils literal notranslate"><span class="pre">::</span></code> after a directive is known as an
“argument”. On the lines immediately following a directive you may see one or
more of what’s called an “option”. These are strings with <code class="docutils literal notranslate"><span class="pre">:</span></code> on either end.</p>
</section>
<section id="consoletest">
<h2>consoletest<a class="headerlink" href="#consoletest" title="Permalink to this heading"></a></h2>
<p>We’ll be using the consoletest Sphinx extension which adds extra options to
directives. Some options that you’ll see are <code class="docutils literal notranslate"><span class="pre">:test:</span></code> and <code class="docutils literal notranslate"><span class="pre">:filepath:</span></code>.
The full documentation for the consoletest Sphinx extension can be found here:
<a class="reference internal" href="../../contributing/consoletest.html"><span class="doc">consoletest Sphinx extension</span></a>.</p>
<p>The consoletest Sphinx extension will be used for
<a class="reference internal" href="#model-tutorial-docs-testing-examples"><span class="std std-ref">Testing Examples</span></a>. As we write our documentation we’ll
keep in mind the functionality that consoletest provides. The goal is to write
documentation that a user would be able to copy paste file data and commands
from. The consoletest plugin will help us simulate the actions of the user.
Allowing us to write the same files and run the same commands we’re asking the
developer to. Just as the developer will, the consoletest plugin will start
every test by creating an empty directory in which to do run it’s test. Our
documentation is telling the developer what files to create within that
directory and what commands to run.</p>
<p>We use the <code class="docutils literal notranslate"><span class="pre">:test:</span></code> option on any directive that we want the consoletest
plugin to run. We’ll use the <code class="docutils literal notranslate"><span class="pre">:filepath:</span></code> option whenever we want
to write data in a <code class="docutils literal notranslate"><span class="pre">code-block</span></code> to a file within the test environment’s
temporary directory. When the <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code> directive is used to display
contents of a file, we can also have the contents that are being displayed
copied into a file of a given name within the test environment by using the
<code class="docutils literal notranslate"><span class="pre">:filepath:</span></code> option.</p>
<p>Sometimes you may just want to show a <code class="docutils literal notranslate"><span class="pre">code-block</span></code> or a <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code>
that consoletest shouldn’t run. Just leave off the <code class="docutils literal notranslate"><span class="pre">:test:</span></code> option in these
situations.</p>
</section>
<section id="example-datasets">
<span id="model-tutorial-docs-example-datasets"></span><h2>Example Datasets<a class="headerlink" href="#example-datasets" title="Permalink to this heading"></a></h2>
<p>We can include text data to be written to files within <code class="docutils literal notranslate"><span class="pre">code-block</span></code>
directives. You may want to download data from the internet instead. Running a
command via <code class="docutils literal notranslate"><span class="pre">code-block::</span> <span class="pre">console</span></code> which you’ll see an example of shortly is a
good way to do that.</p>
<p>We usually start by telling the user to create the training and test datasets.
We always try to make it clear to the user what file they should be writing it
by putting the filename in bold above the file contents.</p>
<p><strong>dffml_model_myslr/myslr.py</strong></p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="linenos">70</span>    The dataset used for training
<span class="linenos">71</span>
<span class="linenos">72</span>    <span class="gs">**train.csv**</span>
<span class="linenos">73</span>
<span class="linenos">74</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span>
<span class="linenos">75</span>        <span class="nc">:test:</span>
<span class="linenos">76</span>        <span class="nc">:filepath:</span> train.csv
<span class="linenos">77</span>
<span class="linenos">78</span>        x,y
<span class="linenos">79</span>        0.0,0
<span class="linenos">80</span>        0.1,1
<span class="linenos">81</span>        0.2,2
<span class="linenos">82</span>        0.3,3
<span class="linenos">83</span>        0.4,4
<span class="linenos">84</span>        0.5,5
<span class="linenos">85</span>
<span class="linenos">86</span>    The dataset used for testing
<span class="linenos">87</span>
<span class="linenos">88</span>    <span class="gs">**test.csv**</span>
<span class="linenos">89</span>
<span class="linenos">90</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span>
<span class="linenos">91</span>        <span class="nc">:test:</span>
<span class="linenos">92</span>        <span class="nc">:filepath:</span> test.csv
<span class="linenos">93</span>
<span class="linenos">94</span>        x,y
<span class="linenos">95</span>        0.6,6
<span class="linenos">96</span>        0.7,7
</pre></div>
</div>
</section>
<section id="example-cli-commands">
<h2>Example CLI Commands<a class="headerlink" href="#example-cli-commands" title="Permalink to this heading"></a></h2>
<p>After the user has saved the training and test dataset files. We’ll give then
the command line example usage. We’re going to document how to train the model,
assess it’s accuracy, and use it for prediction.</p>
<p>When there is a way that a <code class="docutils literal notranslate"><span class="pre">code-block</span></code> should be highlighted, we can give it
as an argument. <code class="docutils literal notranslate"><span class="pre">console</span></code>, is the way that code examples that users should run
in the console should be highlighted. There is no proper way to highlight a
<code class="docutils literal notranslate"><span class="pre">.csv</span></code> file, which is why we didn’t talk about highlighting in the
<a class="reference internal" href="#model-tutorial-docs-example-datasets"><span class="std std-ref">Example Datasets</span></a> section.</p>
<p><strong>dffml_model_myslr/myslr.py</strong></p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 98</span>    Train the model
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span> console
<span class="linenos">101</span>        <span class="nc">:test:</span>
<span class="linenos">102</span>
<span class="linenos">103</span>        $ dffml train \
<span class="linenos">104</span>            -model myslr \
<span class="linenos">105</span>            -model-features x:float:1 \
<span class="linenos">106</span>            -model-predict y:int:1 \
<span class="linenos">107</span>            -model-location tempdir \
<span class="linenos">108</span>            -sources f=csv \
<span class="linenos">109</span>            -source-filename train.csv
<span class="linenos">110</span>
<span class="linenos">111</span>    Assess the accuracy
<span class="linenos">112</span>
<span class="linenos">113</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span> console
<span class="linenos">114</span>        <span class="nc">:test:</span>
<span class="linenos">115</span>
<span class="linenos">116</span>        $ dffml accuracy \
<span class="linenos">117</span>            -model myslr \
<span class="linenos">118</span>            -scorer mse \
<span class="linenos">119</span>            -model-features x:float:1 \
<span class="linenos">120</span>            -model-predict y:int:1 \
<span class="linenos">121</span>            -model-location tempdir \
<span class="linenos">122</span>            -features y:int:1 \
<span class="linenos">123</span>            -sources f=csv \
<span class="linenos">124</span>            -source-filename test.csv
<span class="linenos">125</span>        1.0
<span class="linenos">126</span>
<span class="linenos">127</span>    Make a prediction
<span class="linenos">128</span>
<span class="linenos">129</span>    <span class="gs">**predict.csv**</span>
<span class="linenos">130</span>
<span class="linenos">131</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span>
<span class="linenos">132</span>        <span class="nc">:test:</span>
<span class="linenos">133</span>        <span class="nc">:filepath:</span> predict.csv
<span class="linenos">134</span>
<span class="linenos">135</span>        x
<span class="linenos">136</span>        0.8
<span class="linenos">137</span>
<span class="linenos">138</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span> console
<span class="linenos">139</span>        <span class="nc">:test:</span>
<span class="linenos">140</span>
<span class="linenos">141</span>        $ dffml predict all \
<span class="linenos">142</span>            -model myslr \
<span class="linenos">143</span>            -model-features x:float:1 \
<span class="linenos">144</span>            -model-predict y:int:1 \
<span class="linenos">145</span>            -model-location tempdir \
<span class="linenos">146</span>            -sources f=csv \
<span class="linenos">147</span>            -source-filename predict.csv
<span class="linenos">148</span>        [
<span class="linenos">149</span>            {
<span class="linenos">150</span>                &quot;extra&quot;: {},
<span class="linenos">151</span>                &quot;features&quot;: {
<span class="linenos">152</span>                    &quot;x&quot;: 0.8
<span class="linenos">153</span>                },
<span class="linenos">154</span>                &quot;key&quot;: &quot;0&quot;,
<span class="linenos">155</span>                &quot;last_updated&quot;: &quot;2020-11-15T16:22:25Z&quot;,
<span class="linenos">156</span>                &quot;prediction&quot;: {
<span class="linenos">157</span>                    &quot;y&quot;: {
<span class="linenos">158</span>                        &quot;confidence&quot;: 1.0,
<span class="linenos">159</span>                        &quot;value&quot;: 7.999999999999998
<span class="linenos">160</span>                    }
<span class="linenos">161</span>                }
<span class="linenos">162</span>            }
<span class="linenos">163</span>        ]
</pre></div>
</div>
</section>
<section id="example-python-usage">
<h2>Example Python Usage<a class="headerlink" href="#example-python-usage" title="Permalink to this heading"></a></h2>
<p>Try to include as much of the examples inline as possible. However, when it
comes time to include a Python file in an example it’s best to leave it as a
separate file and use <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code> to display the contents. We do this
because the auto formatter, <a class="reference external" href="https://github.com/psf/black">black</a>, can only
format Python files. It can’t format examples within rST within a docstring.</p>
<p><strong>dffml_model_myslr/myslr.py</strong></p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="linenos">165</span>    Example usage of Logistic Regression using Python
<span class="linenos">166</span>
<span class="linenos">167</span>    <span class="gs">**example_myslr.py**</span>
<span class="linenos">168</span>
<span class="linenos">169</span><span class="p">    ..</span> <span class="ow">literalinclude</span><span class="p">::</span> ../examples/example_myslr.py
<span class="linenos">170</span>        <span class="nc">:test:</span>
<span class="linenos">171</span>        <span class="nc">:filepath:</span> example_myslr.py
</pre></div>
</div>
<p>By specifying the <code class="docutils literal notranslate"><span class="pre">:filepath:</span></code> we copied the contents of the Python example
to the test environment’s directory. The last thing we need to do is run the
Python example and show what it’s output would be. Then end the docstring with
another <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;`</span></code>.</p>
<p><strong>dffml_model_myslr/myslr.py</strong></p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="linenos">173</span><span class="p">    ..</span> <span class="ow">code-block</span><span class="p">::</span> console
<span class="linenos">174</span>        <span class="nc">:test:</span>
<span class="linenos">175</span>
<span class="linenos">176</span>        $ python example_myslr.py
<span class="linenos">177</span>        Accuracy: 1.0
<span class="linenos">178</span>        {&#39;x&#39;: 0.9, &#39;y&#39;: 4}
</pre></div>
</div>
</section>
<section id="testing-examples">
<span id="model-tutorial-docs-testing-examples"></span><h2>Testing Examples<a class="headerlink" href="#testing-examples" title="Permalink to this heading"></a></h2>
<p>Using the
<a class="reference external" href="https://github.com/intel/dffml/tree/main/dffml/util/testing/consoletest">consoletest</a>
module we can test the <code class="docutils literal notranslate"><span class="pre">code-block</span></code> sections within the docstring. DFFML has a
<a class="reference internal" href="../../api/util/testing/docs.html#dffml.util.testing.docs.run_consoletest" title="dffml.util.testing.docs.run_consoletest"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_consoletest</span></code></a> function we
will be using.</p>
<p>We have an integration test file which will use
<a class="reference internal" href="../../api/util/testing/docs.html#dffml.util.testing.docs.run_consoletest" title="dffml.util.testing.docs.run_consoletest"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_consoletest</span></code></a>
to test the model’s docstring.</p>
<p><strong>tests/test_integration.py</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dffml</span> <span class="kn">import</span> <span class="n">AsyncTestCase</span><span class="p">,</span> <span class="n">run_consoletest</span>

<span class="kn">from</span> <span class="nn">dffml_model_myslr.myslr</span> <span class="kn">import</span> <span class="n">MySLRModel</span>


<span class="k">class</span> <span class="nc">TestIntegrationMySLRModel</span><span class="p">(</span><span class="n">AsyncTestCase</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">test_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">run_consoletest</span><span class="p">(</span><span class="n">MySLRModel</span><span class="p">)</span>
</pre></div>
</div>
<p>We can run the test using the <code class="docutils literal notranslate"><span class="pre">unittest</span></code> module. The create command gave us
both unit tests and integration tests. We want to only run the integration test
right now (<code class="docutils literal notranslate"><span class="pre">tests.test_integration</span></code>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m unittest -v tests.test_integration
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tutorial will be updated to show how to build a documentation website
just like this one which will display an HTML version of restructured text.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="package.html" class="btn btn-neutral float-left" title="Packaging a Model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../sources/index.html" class="btn btn-neutral float-right" title="Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017 - 2022, Intel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>